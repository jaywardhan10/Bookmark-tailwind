<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animation</title>
    <style>
 body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
        }
        canvas {
            border: 1px solid black;
        }
        .car {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: blue;
            border-radius: 50%;
        }

    </style>
    
</head>
<body>
    <canvas id="myCanvas"></canvas>
    <div class="car" id="car"></div>
    <script src="script.js"></script>
    <script>


//        const canvas = document.getElementById('myCanvas');
// const ctx = canvas.getContext('2d');
// const car = document.getElementById('car');

// // Resize canvas to fill the viewport
// function resizeCanvas() {
//     canvas.width = window.innerWidth;
//     canvas.height = window.innerHeight;
// }
// resizeCanvas();
// window.addEventListener('resize', resizeCanvas);

// // Fixed positions for the 7 services
// const points = [
//     { x: 100, y: 500, label: 'Service 1' },
//     { x: 400, y: 80, label: 'Service 2' },
//     { x: 500, y: 400, label: 'Service 3' },
//     { x: 50, y: 150, label: 'Service 4' },
//     { x: 1000, y: 100, label: 'Service 5' },
//     { x: 750, y: 100, label: 'Service 6' },
//     { x: 1300, y: 400, label: 'Service 7' }
// ];

// // Draw a point
// function drawPoint(x, y, color = 'red') {
//     ctx.beginPath();
//     ctx.arc(x, y, 8, 0, 2 * Math.PI);
//     ctx.fillStyle = color;
//     ctx.fill();
// }

// // Draw a line between two points with a gradient
// function drawLine(from, to, progress, color1 = 'gray', color2 = 'black') {
//     const gradient = ctx.createLinearGradient(from.x, from.y, to.x, to.y);
//     gradient.addColorStop(0, color1);
//     gradient.addColorStop(1, color2);

//     ctx.beginPath();
//     ctx.moveTo(from.x, from.y);
//     ctx.lineTo(from.x + (to.x - from.x) * progress, from.y + (to.y - from.y) * progress);
//     ctx.strokeStyle = gradient;
//     ctx.lineWidth = 3;
//     ctx.stroke();
// }

// // Draw a label with a box
// function drawLabel(x, y, text) {
//     ctx.font = '14px Arial';
//     ctx.fillStyle = 'black';
//     const textWidth = ctx.measureText(text).width;
//     const padding = 10;
//     const boxWidth = textWidth + padding * 2;
//     const boxHeight = 30;
//     ctx.fillStyle = 'white';
//     ctx.fillRect(x - boxWidth / 2, y - boxHeight / 2, boxWidth, boxHeight);
//     ctx.strokeStyle = 'black';
//     ctx.strokeRect(x - boxWidth / 2, y - boxHeight / 2, boxWidth, boxHeight);
//     ctx.fillStyle = 'black';
//     ctx.fillText(text, x - textWidth / 2, y + 5);
// }

// // Draw all points and labels
// function drawAllPointsAndLabels() {
//     points.forEach(point => {
//         drawPoint(point.x, point.y, 'green');
//         drawLabel(point.x, point.y - 20, point.label);
//     });
// }

// // Function to animate the connection of points and car movement
// function animateLines() {
//     let index = 0;
//     let progress = 0;
//     const speed = 0.02; // Speed of the animation
//     const delay = 1000; // Delay between drawing each line

//     function animate() {
//         ctx.clearRect(0, 0, canvas.width, canvas.height);

//         // Draw the current line being animated and move the car
//         if (index < points.length - 1) {
//             const from = points[index];
//             const to = points[index + 1];
//             const currentX = from.x + (to.x - from.x) * progress;
//             const currentY = from.y + (to.y - from.y) * progress;

//             // Move the car
//             car.style.left = `${currentX - car.offsetWidth / 2}px`;
//             car.style.top = `${currentY - car.offsetHeight / 2}px`;

//             // Draw the line segment being animated
//             drawLine(from, to, progress);

//             // Draw points and labels for all reached points
//             for (let i = 0; i <= index; i++) {
//                 drawPoint(points[i].x, points[i].y, 'green');
//                 drawLabel(points[i].x, points[i].y - 20, points[i].label);
//             }

//             // Draw the destination point if reached
//             if (progress >= 1) {
//                 drawPoint(to.x, to.y, 'green');
//                 drawLabel(to.x, to.y - 20, to.label);
//                 progress = 0;
//                 index++;
//                 setTimeout(animate, delay); // Delay before drawing the next line
//             } else {
//                 progress += speed;
//                 requestAnimationFrame(animate);
//             }
//         } else {
//             // Once the animation is complete, draw all points and labels
//             drawAllPointsAndLabels();
//         }
//     }

//     animate();
// }



// // Start animation
// animateLines();




// const canvas = document.getElementById('myCanvas');
// const ctx = canvas.getContext('2d');
// const car = document.getElementById('car');

// // Resize canvas to fill the viewport
// function resizeCanvas() {
//     canvas.width = window.innerWidth;
//     canvas.height = window.innerHeight;
//     generateRandomPoints(); // Regenerate points on resize
// }
// resizeCanvas();
// window.addEventListener('resize', resizeCanvas);

// // Generate random positions for the services
// var points = [];
// function generateRandomPoints() {
//     points = [];
//     const numPoints = 7;
//     // Set the first point at the bottom left corner
//     points.push({ x: 50, y: canvas.height - 50, label: 'Service 1' });

//     for (let i = 1; i < numPoints; i++) {
        
//         const x = Math.random() * (canvas.width - 100) + 50; // Ensure points are within bounds
//         const y = Math.random() * (canvas.height - 100) + 50; // Ensure points are within bounds
//         points.push({ x: x, y: y, label: `Service ${i + 1}` });
//     }
// }

// // Initial generation of random points
// generateRandomPoints();

// // Draw a point
// function drawPoint(x, y, color = 'red') {
//     ctx.beginPath();
//     ctx.arc(x, y, 8, 0, 2 * Math.PI);
//     ctx.fillStyle = color;
//     ctx.fill();
// }

// // Draw a curved line between two points with a gradient
// function drawCurvedLine(from, to, progress, color1 = 'gray', color2 = 'black') {
//     const controlPointX = (from.x + to.x) / 2;
//     const controlPointY = from.y - 100; // Adjust this value for more or less curve

//     const gradient = ctx.createLinearGradient(from.x, from.y, to.x, to.y);
//     gradient.addColorStop(0, color1);
//     gradient.addColorStop(1, color2);

//     ctx.beginPath();
//     ctx.moveTo(from.x, from.y);
//     ctx.quadraticCurveTo(controlPointX, controlPointY, from.x + (to.x - from.x) * progress, from.y + (to.y - from.y) * progress);
//     ctx.strokeStyle = gradient;
//     ctx.lineWidth = 3;
//     ctx.stroke();
// }

// // Draw a label with a box
// function drawLabel(x, y, text) {
//     ctx.font = '14px Arial';
//     ctx.fillStyle = 'black';
//     const textWidth = ctx.measureText(text).width;
//     const padding = 10;
//     const boxWidth = textWidth + padding * 2;
//     const boxHeight = 30;
//     ctx.fillStyle = 'white';
//     ctx.fillRect(x - boxWidth / 2, y - boxHeight / 2, boxWidth, boxHeight);
//     ctx.strokeStyle = 'black';
//     ctx.strokeRect(x - boxWidth / 2, y - boxHeight / 2, boxWidth, boxHeight);
//     ctx.fillStyle = 'black';
//     ctx.fillText(text, x - textWidth / 2, y + 5);
// }

// // Draw all points and labels
// function drawAllPointsAndLabels() {
//     points.forEach(point => {
//         drawPoint(point.x, point.y, 'green');
//         drawLabel(point.x, point.y - 20, point.label);
//     });
// }

// // Function to animate the connection of points and car movement
// function animateLines() {
//     let index = 0;
//     let progress = 0;
//     const speed = 0.02; // Speed of the animation
//     const delay = 1000; // Delay between drawing each line

//     function animate() {
//         ctx.clearRect(0, 0, canvas.width, canvas.height);

//         // Draw the current line being animated and move the car
//         if (index < points.length - 1) {
//             const from = points[index];
//             const to = points[index + 1];
//             const currentX = from.x + (to.x - from.x) * progress;
//             const currentY = from.y + (to.y - from.y) * progress;

//             // Move the car
//             car.style.left = `${currentX - car.offsetWidth / 2}px`;
//             car.style.top = `${currentY - car.offsetHeight / 2}px`;

//             // Draw the curved line segment being animated
//             drawCurvedLine(from, to, progress);

//             // Draw points and labels for all reached points
//             for (let i = 0; i <= index; i++) {
//                 drawPoint(points[i].x, points[i].y, 'green');
//                 drawLabel(points[i].x, points[i].y - 20, points[i].label);
//             }

//             // Draw the destination point if reached
//             if (progress >= 1) {
//                 drawPoint(to.x, to.y, 'green');
//                 drawLabel(to.x, to.y - 20, to.label);
//                 progress = 0;
//                 index++;
//                 setTimeout(animate, delay); // Delay before drawing the next line
//             } else {
//                 progress += speed;
//                 requestAnimationFrame(animate);
//             }
//         } else {
//             // Once the animation is complete, draw all points and labels
//             drawAllPointsAndLabels();
//         }
//     }

//     animate();
// }

// // Start animation
// animateLines();




const canvas = document.getElementById('myCanvas');
const ctx = canvas.getContext('2d');
const car = document.getElementById('car');

// Resize canvas to fill the viewport
function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    generateRandomPoints(); // Regenerate points on resize
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

// Generate random positions for the services
var points = [];
function generateRandomPoints() {
    points = [];
    const numPoints = 7;
    // Set the first point at the bottom left corner
    test = [
        "Services 1","Services 2","Services 3","Services 4","Services 5","Services 6","Services 7",
    ]
    points.push({ x: 50, y: canvas.height - 50, label: test[0] });

    for (let i = 1; i < numPoints; i++) {
        
        const x = Math.random() * (canvas.width - 100) + 50; // Ensure points are within bounds
        const y = Math.random() * (canvas.height - 100) + 50; // Ensure points are within bounds
        // points.push({ x: x, y: y, label: `Service ${i + 1}` });
        points.push({ x: x, y: y, label: test[`${i}`] });

    }
}

// Initial generation of random points
generateRandomPoints();
// Draw a point
function drawPoint(x, y, color = 'red') {
    ctx.beginPath();
    ctx.arc(x, y, 8, 0, 2 * Math.PI);
    ctx.fillStyle = color;
    ctx.fill();
}

// Draw a line between two points with a gradient
function drawLine(from, to, progress, color1 = 'gray', color2 = 'black') {
    const gradient = ctx.createLinearGradient(from.x, from.y, to.x, to.y);
    gradient.addColorStop(0, color1);
    gradient.addColorStop(1, color2);

    ctx.beginPath();
    ctx.moveTo(from.x, from.y);
    ctx.lineTo(from.x + (to.x - from.x) * progress, from.y + (to.y - from.y) * progress);
    ctx.strokeStyle = gradient;
    ctx.lineWidth = 1;
    ctx.stroke();
}

// Draw a label with a box
function drawLabel(x, y, text) {
    ctx.font = '14px Arial';
    ctx.fillStyle = 'black';
    const textWidth = ctx.measureText(text).width;
    const padding = 10;
    const boxWidth = textWidth + padding * 2;
    const boxHeight = 30;
    ctx.fillStyle = 'white';
    ctx.fillRect(x - boxWidth / 2, y - boxHeight / 2, boxWidth, boxHeight);
    ctx.strokeStyle = 'black';
    ctx.strokeRect(x - boxWidth / 2, y - boxHeight / 2, boxWidth, boxHeight);
    ctx.fillStyle = 'black';
    ctx.fillText(text, x - textWidth / 2, y + 5);
}

// Draw all points and labels
function drawAllPointsAndLabels() {
    points.forEach(point => {
        drawPoint(point.x, point.y, 'green');
        drawLabel(point.x, point.y - 20, point.label);
    });
}

// Function to animate the connection of points and car movement
function animateLines() {
    let index = 0;
    let progress = 0;
    const speed = 0.02; // Speed of the animation
    const delay = 1000; // Delay between drawing each line

    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Draw the current line being animated and move the car
        if (index < points.length - 1) {
            const from = points[index];
            const to = points[index + 1];
            const currentX = from.x + (to.x - from.x) * progress;
            const currentY = from.y + (to.y - from.y) * progress;

            // Move the car
            car.style.left = `${currentX - car.offsetWidth / 2}px`;
            car.style.top = `${currentY - car.offsetHeight / 2}px`;

            // Draw the line segment being animated
            drawLine(from, to, progress);

            // Draw points and labels for all reached points
            for (let i = 0; i <= index; i++) {
                drawPoint(points[i].x, points[i].y, 'green');
                drawLabel(points[i].x, points[i].y - 20, points[i].label);
            }

            // Draw the destination point if reached
            if (progress >= 1) {
                drawPoint(to.x, to.y, 'green');
                drawLabel(to.x, to.y - 20, to.label);
                progress = 0;
                index++;
                setTimeout(animate, delay); // Delay before drawing the next line
            } else {
                progress += speed;
                requestAnimationFrame(animate);
            }
        } else {
            // Once the animation is complete, draw all points and labels
            drawAllPointsAndLabels();
        }
    }

    animate();
}

// // Start animation
animateLines();


    </script>
</body>
</html>